<dom-module id="home-page">
  <template>
    <video autoplay loop id="home-background">
      <source src="../video/background.webm" type="video/webm">
  	  <!--<source src="../video/background.mp4" type="video/mp4">-->
    </video>
    <div id="homepage">
      <div id="home-content">
        <h1>HackBoard</h1>
        <p>HackBoard is an online dashboard that aims to make hack events "run simple"</p>
        <div id="home-login">
          <paper-tabs selected="{{selected}}">
            <paper-tab>Login</paper-tab>
            <paper-tab>Sign Up</paper-tab>
          </paper-tabs>
          <firebase-auth id="firebaseLogin" user="{{user}}" status-known="{{statusKnown}}" location="https://hackboard.firebaseio.com" provider="password" on-error="errorHandler" on-user-created="userStatus"></firebase-auth>
          <iron-pages selected="{{selected}}">
            <div id="loginPage">
              <paper-input class="email" label="Email Address" value="{{email::input}}"></paper-input>
              <paper-input class="password" label="Password" type="password" value="{{password::input}}"></paper-input>
              <paper-button on-tap="login" id="loginButton" raised>Login</paper-button>
            </div>
            <div id="signupPage">
              <paper-input class="email" label="Email Address" value="{{email::input}}"></paper-input>
              <paper-input class="password" label="Password" type="password" value="{{password::input}}"></paper-input>
              <paper-button on-tap="signup" id="signupButton" raised>Sign up</paper-button>
            </div>
          </iron-pages>
        </div>
      </div>
      <paper-toast id="authError" role="alert"></paper-toast>
    </div>
  </template>
</dom-module>

<script>
  Polymer({
    is: "home-page",
    properties: {
      selected: {
        type: String,
        value: "0"
      },
      email: {
        type: String,
        value: ''
      },
      password: {
        type: String,
        value: ''
      },
      user: Object
    },
    login: function() {
      this.$.firebaseLogin.login({email: this.email, password: this.password});
      this.$.loginButton.blur()
      console.log(this.user)
    },
    signup: function() {
      this.$.firebaseLogin.createUser(this.email, this.password);
      this.$.signupButton.blur()
      console.log(this.user)
    },
    errorHandler: function(error) {
      document.querySelector('#authError').text = error.detail.message
      document.querySelector('#authError').show()
    },
    userStatus: function(event) {
      console.log(event.type)
    }
  })
</script>
